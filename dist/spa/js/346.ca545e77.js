"use strict";(globalThis["webpackChunkunilocadora"]=globalThis["webpackChunkunilocadora"]||[]).push([[346],{5004:(e,l,o)=>{o.d(l,{Z:()=>n});var a=o(7524);const t=a.Z.create({baseURL:"http://localhost:3000/",withCredentials:!1,headers:{accept:"application/json","Content-type":"application/json"}}),n=t},5019:(e,l,o)=>{o.d(l,{Z:()=>r});var a=o(5004),t=o(7524);const n=t.Z.create({baseURL:"https://api.themoviedb.org/3/movie",withCredentials:!1,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE",accept:"application/json","Content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0ZjUzMjgxM2IyZDUwM2Q0ZDU2MjAwNmZjMWMzM2JmNiIsInN1YiI6IjY0NzlmZmE3ZTMyM2YzMDE0ODE1ZmFlYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fq0mEu3JWrVkQxKCkW0t2ICp6rhBYPe-0V2aluVHuBc"}}),i=n;var s=o(9409);const c={getAllFilmes(e){if(0==s.U.filmes.length)console.log("getAllFilmes zerado"),i.get("/popular?language=pt-BR&page=1&callback=test",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS, PUT, DELETE",accept:"application/json","Content-type":"application/json"}}).then((l=>{s.U.setFilmes(l.data),null!=e&&e(s.U.filmes)})).catch((e=>{alert(e.message)}));else{if(console.log("getAllFilmes com dados"),null==e)return s.U.filmes;console.log("getAllFilmes com dados e callback "),console.log(s.U.filmes),e(s.U.filmes)}},getFilmesByActor(e){return filmesStore.getFilmesByActor(e)},saveFilme(e){filmesStore.addFilme(e)},saveCliente(e,l){a.Z.post("/clientes.json",e).then((e=>{console.log(e.data),s.U.setCliente(e.data),null!=l&&(console.log("saveCliente com callback"),l(!0))})).catch((e=>{alert(e.message)}))}},r=c},9409:(e,l,o)=>{o.d(l,{U:()=>n});o(9665);var a=o(1809);const t=(0,a.Q_)("app",{state:()=>({carrinho:{filmes:[],cliente:null,valor:0,data:null,devolvido:!1},cliente:null,filmes:[]}),actions:{addFilme(e){this.filmes.push(e)},setFilmes(e){this.filmes=e},getFilmesByAno(e){return this.filmes.filter((l=>l.ano==e))},getFilmesByActor(e){return this.filmes.filter((l=>l.atores.includes(e)))},setCliente(e){this.cliente=e},limparCarrinho(){this.carrinho={filmes:[],cliente:null,valor:0,data:null,devolvido:!1}},setClienteCarrinho(e){this.carrinho.cliente=e},addFilmeCarrinho(e){this.carrinho.filmes.push(e)}}}),n=t()},4346:(e,l,o)=>{o.r(l),o.d(l,{default:()=>O});var a=o(9835);const t={key:0},n={key:2,class:"q-pa-md row items-start q-gutter-md"};function i(e,l,o,i,s,c){const r=(0,a.up)("q-btn"),m=(0,a.up)("form-cliente"),d=(0,a.up)("FilmeCard"),u=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(u,{class:"flex flex-center"},{default:(0,a.w5)((()=>[e.naoLogado()?((0,a.wg)(),(0,a.iD)("div",t,[(0,a.Uk)(" Olá! Seja bem vindo! Faça seu "),(0,a.Wm)(r,{class:"q-ma-sm",onClick:e.login},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1},8,["onClick"]),(0,a.Uk)(" ou "),(0,a.Wm)(r,{class:"q-ma-sm",onClick:l[0]||(l[0]=l=>e.showFormCliente=!e.showFormCliente)},{default:(0,a.w5)((()=>[(0,a.Uk)("Cadastre-se")])),_:1})])):(0,a.kq)("",!0),e.showFormCliente?((0,a.wg)(),(0,a.j4)(m,{key:1,onSalvarCliente:e.onSalvarCliente,cliente:{id:0,nome:"",email:"",telefone:"",cpf:""}},null,8,["onSalvarCliente"])):(0,a.kq)("",!0),e.naoLogado()?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filmes,(l=>((0,a.wg)(),(0,a.iD)("div",{key:l.id,class:"col-xs-12 col-sm-6 col-md-4"},[(0,a.Wm)(d,{logado:!e.naoLogado(),filme:l,onLocarFilme:e.onLocarFilme,onComparFilme:e.onComprarFilme},null,8,["logado","filme","onLocarFilme","onComparFilme"])])))),128))]))])),_:1})}o(9665);var s=o(9302),c=o(6970);const r=(0,a._)("h3",null,"Cliente",-1);function m(e,l,o,t,n,i){const s=(0,a.up)("q-input"),m=(0,a.up)("q-btn"),d=(0,a.up)("q-form"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{class:"q-ma-md q-pa-md shadow-10"},{default:(0,a.w5)((()=>[r,(0,a.Uk)(" "+(0,c.zw)(o.cliente)+" ",1),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{outlined:"",modelValue:n.clienteData.nome,"onUpdate:modelValue":l[0]||(l[0]=e=>n.clienteData.nome=e),label:"Nome"},null,8,["modelValue"]),(0,a.Wm)(s,{outlined:"",modelValue:n.clienteData.email,"onUpdate:modelValue":l[1]||(l[1]=e=>n.clienteData.email=e),label:"E-mail",rules:[(e,l)=>l.email(e)||"Please enter a valid email address"]},null,8,["modelValue","rules"]),(0,a.Wm)(s,{outlined:"",modelValue:n.clienteData.telefone,"onUpdate:modelValue":l[2]||(l[2]=e=>n.clienteData.telefone=e),mask:"(##)#####.####","fill-mask":"_",label:"Telefone"},null,8,["modelValue"]),(0,a.Wm)(s,{outlined:"",modelValue:n.clienteData.cpf,"onUpdate:modelValue":l[3]||(l[3]=e=>n.clienteData.cpf=e),label:"CPF"},null,8,["modelValue"]),(0,a.Wm)(m,{color:"primary",label:"Salvar",class:"q-mt-md",onClick:i.salvar},null,8,["onClick"])])),_:1})])),_:1})}o(5004);const d={name:"FormCliente",props:{cliente:Object},data(){return{clienteData:{id:0,nome:"",email:"",telefone:"",cpf:""}}},created(){this.cliente&&(this.clienteData=this.cliente)},methods:{salvar(){this.$emit("salvarCliente",this.clienteData)}}};var u=o(1639),p=o(4458),h=o(8326),f=o(6611),g=o(4455),C=o(9984),w=o.n(C);const k=(0,u.Z)(d,[["render",m]]),v=k;w()(d,"components",{QCard:p.Z,QForm:h.Z,QInput:f.Z,QBtn:g.Z});var F=o(5019),U=o(9409);const Z={class:"text-h6"},b={class:"text-subtitle2"},y=(0,a._)("br",null,null,-1);function D(e,l,o,t,n,i){const s=(0,a.up)("q-card-section"),r=(0,a.up)("q-separator"),m=(0,a.up)("q-btn"),d=(0,a.up)("q-card-actions"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{class:"my-card bg-secondary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a._)("div",Z,(0,c.zw)(o.filme.titulo),1),(0,a._)("div",b,(0,c.zw)(o.filme.genero),1)])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filme.atores,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e},(0,c.zw)(e),1)))),128))])])),_:1}),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Diretor: "+(0,c.zw)(o.filme.diretor),1),y,(0,a.Uk)(" Ano: "+(0,c.zw)(o.filme.ano),1)])),_:1}),(0,a.Wm)(r,{dark:""}),o.logado?((0,a.wg)(),(0,a.j4)(d,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{flat:"",onClick:i.locar},{default:(0,a.w5)((()=>[(0,a.Uk)("Locar")])),_:1},8,["onClick"]),(0,a.Wm)(m,{flat:"",onClick:i.comprar},{default:(0,a.w5)((()=>[(0,a.Uk)("Comprar")])),_:1},8,["onClick"])])),_:1})):(0,a.kq)("",!0)])),_:1})}const q={props:{filme:Object,logado:Boolean},methods:{locar(){this.$emit("locarFilme",this.filme)},comprar(){this.$emit("comprarFilme",this.filme)}}};var j=o(3190),A=o(926),W=o(1821);const _=(0,u.Z)(q,[["render",D]]),I=_;w()(q,"components",{QCard:p.Z,QCardSection:j.Z,QSeparator:A.Z,QCardActions:W.Z,QBtn:g.Z});const Q=(0,a.aZ)({components:{FormCliente:v,FilmeCard:I},name:"IndexPage",data(){return{filmes:Array,showFormCliente:!1}},created(){F.Z.getAllFilmes((e=>{this.filmes=e,console.log("Filmes:"+JSON.stringify(this.filmes))}))},methods:{login(){U.U.cliente={id:1,nome:"teste",email:""},this.showFormCliente=!1},onLocarFilme(e){U.U.carrinho.cliente=U.U.cliente,U.U.carrinho.filmes.push(e),U.U.carrinho.data=new Date},naoLogado(){return console.log(null==U.U.cliente),null==U.U.cliente},onSalvarCliente(e){F.Z.saveCliente(e,(l=>{if(console.log("no onsalvar "+l),l){this.showFormCliente=!1;const l=(0,s.Z)();l.notify({message:"Cliente salvo com sucesso!\nbem vindo "+e.nome,color:"positive",icon:"check"})}}))}}});var V=o(9885);const L=(0,u.Z)(Q,[["render",i]]),O=L;w()(Q,"components",{QPage:V.Z,QBtn:g.Z})}}]);